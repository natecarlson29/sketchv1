{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-actions\\\\FlipHorizontal.jsx\";\nimport React from 'react';\nimport Polygon from 'ol/geom/Polygon';\n\n// Helper to clear overlays for a specific feature\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction clearPolygonOverlays(feature, mapRef) {\n  if (feature && feature._segmentOverlays) {\n    feature._segmentOverlays.forEach(overlay => {\n      if (mapRef.current) mapRef.current.removeOverlay(overlay);\n    });\n    feature._segmentOverlays = [];\n  }\n}\n\n// Flip horizontally and remark segments\nfunction flipPolygonHorizontally(feature, mapRef) {\n  clearPolygonOverlays(feature, mapRef);\n  const geom = feature.getGeometry();\n  if (!(geom instanceof Polygon)) return;\n  const coords = geom.getCoordinates()[0];\n  const xs = coords.map(c => c[0]);\n  const axis = (Math.min(...xs) + Math.max(...xs)) / 2;\n  const flipped = coords.map(([x, y]) => [axis - (x - axis), y]);\n  if (flipped.length > 1 && (flipped[0][0] !== flipped[flipped.length - 1][0] || flipped[0][1] !== flipped[flipped.length - 1][1])) {\n    flipped[flipped.length - 1] = [...flipped[0]];\n  }\n  geom.setCoordinates([flipped]);\n  if (mapRef.current && mapRef.current.remarkPolygonSegments) {\n    mapRef.current.remarkPolygonSegments(feature);\n  }\n}\nexport default function FlipHorizButton({\n  selectedFeature,\n  mapRef\n}) {\n  function handleFlipHoriz() {\n    if (selectedFeature) {\n      flipPolygonHorizontally(selectedFeature, mapRef);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-button\",\n    onClick: handleFlipHoriz,\n    children: \"FlipHoriz\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_c = FlipHorizButton;\nvar _c;\n$RefreshReg$(_c, \"FlipHorizButton\");","map":{"version":3,"names":["React","Polygon","jsxDEV","_jsxDEV","clearPolygonOverlays","feature","mapRef","_segmentOverlays","forEach","overlay","current","removeOverlay","flipPolygonHorizontally","geom","getGeometry","coords","getCoordinates","xs","map","c","axis","Math","min","max","flipped","x","y","length","setCoordinates","remarkPolygonSegments","FlipHorizButton","selectedFeature","handleFlipHoriz","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-actions/FlipHorizontal.jsx"],"sourcesContent":["import React from 'react';\r\nimport Polygon from 'ol/geom/Polygon';\r\n\r\n// Helper to clear overlays for a specific feature\r\nfunction clearPolygonOverlays(feature, mapRef) {\r\n  if (feature && feature._segmentOverlays) {\r\n    feature._segmentOverlays.forEach(overlay => {\r\n      if (mapRef.current) mapRef.current.removeOverlay(overlay);\r\n    });\r\n    feature._segmentOverlays = [];\r\n  }\r\n}\r\n\r\n// Flip horizontally and remark segments\r\nfunction flipPolygonHorizontally(feature, mapRef) {\r\n  clearPolygonOverlays(feature, mapRef);\r\n  const geom = feature.getGeometry();\r\n  if (!(geom instanceof Polygon)) return;\r\n  const coords = geom.getCoordinates()[0];\r\n  const xs = coords.map(c => c[0]);\r\n  const axis = (Math.min(...xs) + Math.max(...xs)) / 2;\r\n  const flipped = coords.map(([x, y]) => [axis - (x - axis), y]);\r\n  if (\r\n    flipped.length > 1 &&\r\n    (flipped[0][0] !== flipped[flipped.length - 1][0] ||\r\n      flipped[0][1] !== flipped[flipped.length - 1][1])\r\n  ) {\r\n    flipped[flipped.length - 1] = [...flipped[0]];\r\n  }\r\n  geom.setCoordinates([flipped]);\r\n  if (mapRef.current && mapRef.current.remarkPolygonSegments) {\r\n    mapRef.current.remarkPolygonSegments(feature);\r\n  }\r\n}\r\n\r\nexport default function FlipHorizButton({ selectedFeature, mapRef }) {\r\n  function handleFlipHoriz() {\r\n    if (selectedFeature) {\r\n      flipPolygonHorizontally(selectedFeature, mapRef);\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"map-button\" onClick={handleFlipHoriz}>\r\n      FlipHoriz\r\n    </div>\r\n  );\r\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,iBAAiB;;AAErC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,SAASC,oBAAoBA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAC7C,IAAID,OAAO,IAAIA,OAAO,CAACE,gBAAgB,EAAE;IACvCF,OAAO,CAACE,gBAAgB,CAACC,OAAO,CAACC,OAAO,IAAI;MAC1C,IAAIH,MAAM,CAACI,OAAO,EAAEJ,MAAM,CAACI,OAAO,CAACC,aAAa,CAACF,OAAO,CAAC;IAC3D,CAAC,CAAC;IACFJ,OAAO,CAACE,gBAAgB,GAAG,EAAE;EAC/B;AACF;;AAEA;AACA,SAASK,uBAAuBA,CAACP,OAAO,EAAEC,MAAM,EAAE;EAChDF,oBAAoB,CAACC,OAAO,EAAEC,MAAM,CAAC;EACrC,MAAMO,IAAI,GAAGR,OAAO,CAACS,WAAW,CAAC,CAAC;EAClC,IAAI,EAAED,IAAI,YAAYZ,OAAO,CAAC,EAAE;EAChC,MAAMc,MAAM,GAAGF,IAAI,CAACG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;EACvC,MAAMC,EAAE,GAAGF,MAAM,CAACG,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,MAAMC,IAAI,GAAG,CAACC,IAAI,CAACC,GAAG,CAAC,GAAGL,EAAE,CAAC,GAAGI,IAAI,CAACE,GAAG,CAAC,GAAGN,EAAE,CAAC,IAAI,CAAC;EACpD,MAAMO,OAAO,GAAGT,MAAM,CAACG,GAAG,CAAC,CAAC,CAACO,CAAC,EAAEC,CAAC,CAAC,KAAK,CAACN,IAAI,IAAIK,CAAC,GAAGL,IAAI,CAAC,EAAEM,CAAC,CAAC,CAAC;EAC9D,IACEF,OAAO,CAACG,MAAM,GAAG,CAAC,KACjBH,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAKA,OAAO,CAACA,OAAO,CAACG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAC/CH,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAKA,OAAO,CAACA,OAAO,CAACG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACnD;IACAH,OAAO,CAACA,OAAO,CAACG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,GAAGH,OAAO,CAAC,CAAC,CAAC,CAAC;EAC/C;EACAX,IAAI,CAACe,cAAc,CAAC,CAACJ,OAAO,CAAC,CAAC;EAC9B,IAAIlB,MAAM,CAACI,OAAO,IAAIJ,MAAM,CAACI,OAAO,CAACmB,qBAAqB,EAAE;IAC1DvB,MAAM,CAACI,OAAO,CAACmB,qBAAqB,CAACxB,OAAO,CAAC;EAC/C;AACF;AAEA,eAAe,SAASyB,eAAeA,CAAC;EAAEC,eAAe;EAAEzB;AAAO,CAAC,EAAE;EACnE,SAAS0B,eAAeA,CAAA,EAAG;IACzB,IAAID,eAAe,EAAE;MACnBnB,uBAAuB,CAACmB,eAAe,EAAEzB,MAAM,CAAC;IAClD;EACF;EACA,oBACEH,OAAA;IAAK8B,SAAS,EAAC,YAAY;IAACC,OAAO,EAAEF,eAAgB;IAAAG,QAAA,EAAC;EAEtD;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAEV;AAACC,EAAA,GAXuBV,eAAe;AAAA,IAAAU,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}