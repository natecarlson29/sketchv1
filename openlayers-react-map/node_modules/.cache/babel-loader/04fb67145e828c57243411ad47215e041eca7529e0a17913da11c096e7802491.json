{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-actions\\\\RightClick.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Feature } from 'ol';\nimport LineString from 'ol/geom/LineString';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RightClick = ({\n  mapRef,\n  vectorSourceRef,\n  contextMenu,\n  setContextMenu,\n  clearPolygonOverlays: clearOverlaysProp,\n  addHistoryAction\n}) => {\n  _s();\n  useEffect(() => {\n    function handleCustomContextMenu(e) {\n      const mapDiv = document.getElementById('map');\n      if (!mapDiv || !mapRef.current || !vectorSourceRef.current) return;\n      if (!mapDiv.contains(e.target)) return;\n      e.preventDefault();\n      const pixel = mapRef.current.getEventPixel(e);\n      const features = vectorSourceRef.current.getFeatures();\n      let found = false;\n      for (const feature of features) {\n        const geom = feature.getGeometry();\n        if (geom.getType() === 'Polygon') {\n          const coords = geom.getCoordinates()[0];\n          for (let i = 0; i < coords.length - 1; i++) {\n            const coordPixel = mapRef.current.getPixelFromCoordinate(coords[i]);\n            if (Math.hypot(pixel[0] - coordPixel[0], pixel[1] - coordPixel[1]) < 8) {\n              setContextMenu({\n                visible: true,\n                x: e.clientX,\n                y: e.clientY,\n                type: 'vertex',\n                feature,\n                index: i\n              });\n              found = true;\n              break;\n            }\n          }\n        }\n        if (found) break;\n      }\n      if (!found) {\n        for (const feature of features) {\n          const geom = feature.getGeometry();\n          if (geom.getType() === 'Polygon') {\n            const coords = geom.getCoordinates()[0];\n            for (let i = 0; i < coords.length - 1; i++) {\n              const c1 = mapRef.current.getPixelFromCoordinate(coords[i]);\n              const c2 = mapRef.current.getPixelFromCoordinate(coords[i + 1]);\n              const t = ((pixel[0] - c1[0]) * (c2[0] - c1[0]) + (pixel[1] - c1[1]) * (c2[1] - c1[1])) / ((c2[0] - c1[0]) ** 2 + (c2[1] - c1[1]) ** 2);\n              if (t >= 0 && t <= 1) {\n                const proj = [c1[0] + t * (c2[0] - c1[0]), c1[1] + t * (c2[1] - c1[1])];\n                if (Math.hypot(pixel[0] - proj[0], pixel[1] - proj[1]) < 8) {\n                  setContextMenu({\n                    visible: true,\n                    x: e.clientX,\n                    y: e.clientY,\n                    type: 'segment',\n                    feature,\n                    index: i\n                  });\n                  found = true;\n                  break;\n                }\n              }\n            }\n          }\n          if (found) break;\n        }\n      }\n      if (!found) setContextMenu({\n        visible: true,\n        x: e.clientX,\n        y: e.clientY,\n        type: null,\n        feature: null,\n        index: null\n      });\n    }\n    document.addEventListener('contextmenu', handleCustomContextMenu);\n    return () => document.removeEventListener('contextmenu', handleCustomContextMenu);\n  }, [mapRef, vectorSourceRef, setContextMenu]);\n  useEffect(() => {\n    function hideMenu() {\n      setContextMenu(menu => menu.visible ? {\n        ...menu,\n        visible: false\n      } : menu);\n    }\n    window.addEventListener('click', hideMenu);\n    return () => window.removeEventListener('click', hideMenu);\n  }, [setContextMenu]);\n\n  // Helper to deep clone coordinates\n  const cloneCoords = coords => coords.map(c => Array.isArray(c) ? [...c] : c);\n  const handleMenuAction = action => {\n    if (!contextMenu.feature) return;\n    const geom = contextMenu.feature.getGeometry();\n    let coords;\n    if (geom.getType() === 'Polygon') {\n      const arr = geom.getCoordinates()[0];\n      if (!Array.isArray(arr) || arr.length < 3 || !Array.isArray(arr[0])) return;\n      coords = arr.map(c => [c[0], c[1]]);\n    } else if (geom.getType() === 'LineString') {\n      const arr = geom.getCoordinates();\n      if (!Array.isArray(arr) || arr.length < 2 || !Array.isArray(arr[0])) return;\n      coords = arr.map(c => [c[0], c[1]]);\n    } else {\n      return;\n    }\n    if (action === 'delete-vertex' && coords.length > 3) {\n      const prevCoords = cloneCoords(coords);\n      const newCoords = cloneCoords(coords);\n      newCoords.splice(contextMenu.index, 1);\n      newCoords[newCoords.length - 1] = newCoords[0];\n      geom.setCoordinates([newCoords]);\n      if (mapRef.current && mapRef.current.createSegmentOverlays) {\n        mapRef.current.createSegmentOverlays(contextMenu.feature, mapRef);\n      }\n      setContextMenu({\n        ...contextMenu,\n        visible: false\n      });\n      addHistoryAction({\n        type: 'delete-vertex',\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\n        prevCoords,\n        newCoords,\n        index: contextMenu.index\n      });\n    }\n    if (action === 'delete-segment' && coords.length > 3) {\n      if (clearOverlaysProp) clearOverlaysProp(contextMenu.feature);\n      const prevCoords = cloneCoords(coords);\n      if (coords.length > 2 && coords[0][0] === coords[coords.length - 1][0] && coords[0][1] === coords[coords.length - 1][1]) {\n        coords = coords.slice(0, coords.length - 1);\n      }\n      const index = contextMenu.index;\n      const part1 = coords.slice(index + 1);\n      const part2 = coords.slice(0, index + 1);\n      const newCoords = [...part1, ...part2];\n      if (vectorSourceRef.current && vectorSourceRef.current.getFeatures().includes(contextMenu.feature)) {\n        vectorSourceRef.current.removeFeature(contextMenu.feature);\n      }\n      const lineFeature = new Feature(new LineString(newCoords));\n      if (contextMenu.feature.getId) {\n        lineFeature.setId(contextMenu.feature.getId());\n      }\n      vectorSourceRef.current.addFeature(lineFeature);\n      if (mapRef.current && mapRef.current.createSegmentOverlays) {\n        mapRef.current.createSegmentOverlays(lineFeature, mapRef);\n      }\n      setContextMenu({\n        ...contextMenu,\n        visible: false\n      });\n      addHistoryAction({\n        type: 'delete-segment',\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\n        prevCoords,\n        newCoords: cloneCoords(newCoords),\n        index: contextMenu.index\n      });\n    }\n  };\n  return contextMenu.visible ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"right-click-menu\",\n    style: {\n      position: 'fixed',\n      top: contextMenu.y,\n      left: contextMenu.x,\n      background: '#fff',\n      border: '1px solid #ccc',\n      zIndex: 1000,\n      padding: 4,\n      minWidth: 120\n    },\n    onContextMenu: e => e.preventDefault(),\n    onMouseLeave: () => setContextMenu({\n      ...contextMenu,\n      visible: false\n    }),\n    children: [contextMenu.type === 'vertex' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-item\",\n      onClick: () => handleMenuAction('delete-vertex'),\n      style: {\n        cursor: 'pointer',\n        padding: '4px 8px'\n      },\n      children: \"Delete Vertex\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this), contextMenu.type === 'segment' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-item\",\n      onClick: () => handleMenuAction('delete-segment'),\n      style: {\n        cursor: 'pointer',\n        padding: '4px 8px'\n      },\n      children: \"Delete Segment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }, this), !contextMenu.type && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#888',\n        padding: '4px 8px'\n      },\n      children: \"No actions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this) : null;\n};\n_s(RightClick, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n_c = RightClick;\nexport default RightClick;\nvar _c;\n$RefreshReg$(_c, \"RightClick\");","map":{"version":3,"names":["React","useEffect","Feature","LineString","jsxDEV","_jsxDEV","RightClick","mapRef","vectorSourceRef","contextMenu","setContextMenu","clearPolygonOverlays","clearOverlaysProp","addHistoryAction","_s","handleCustomContextMenu","e","mapDiv","document","getElementById","current","contains","target","preventDefault","pixel","getEventPixel","features","getFeatures","found","feature","geom","getGeometry","getType","coords","getCoordinates","i","length","coordPixel","getPixelFromCoordinate","Math","hypot","visible","x","clientX","y","clientY","type","index","c1","c2","t","proj","addEventListener","removeEventListener","hideMenu","menu","window","cloneCoords","map","c","Array","isArray","handleMenuAction","action","arr","prevCoords","newCoords","splice","setCoordinates","createSegmentOverlays","featureId","getId","slice","part1","part2","includes","removeFeature","lineFeature","setId","addFeature","className","style","position","top","left","background","border","zIndex","padding","minWidth","onContextMenu","onMouseLeave","children","onClick","cursor","fileName","_jsxFileName","lineNumber","columnNumber","color","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-actions/RightClick.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Feature } from 'ol';\r\nimport LineString from 'ol/geom/LineString';\r\n\r\nconst RightClick = ({\r\n  mapRef,\r\n  vectorSourceRef,\r\n  contextMenu,\r\n  setContextMenu,\r\n  clearPolygonOverlays: clearOverlaysProp,\r\n  addHistoryAction\r\n}) => {\r\n  useEffect(() => {\r\n    function handleCustomContextMenu(e) {\r\n      const mapDiv = document.getElementById('map');\r\n      if (!mapDiv || !mapRef.current || !vectorSourceRef.current) return;\r\n      if (!mapDiv.contains(e.target)) return;\r\n      e.preventDefault();\r\n      const pixel = mapRef.current.getEventPixel(e);\r\n      const features = vectorSourceRef.current.getFeatures();\r\n\r\n      let found = false;\r\n      for (const feature of features) {\r\n        const geom = feature.getGeometry();\r\n        if (geom.getType() === 'Polygon') {\r\n          const coords = geom.getCoordinates()[0];\r\n          for (let i = 0; i < coords.length - 1; i++) {\r\n            const coordPixel = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n            if (Math.hypot(pixel[0] - coordPixel[0], pixel[1] - coordPixel[1]) < 8) {\r\n              setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'vertex', feature, index: i });\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (found) break;\r\n      }\r\n\r\n      if (!found) {\r\n        for (const feature of features) {\r\n          const geom = feature.getGeometry();\r\n          if (geom.getType() === 'Polygon') {\r\n            const coords = geom.getCoordinates()[0];\r\n            for (let i = 0; i < coords.length - 1; i++) {\r\n              const c1 = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n              const c2 = mapRef.current.getPixelFromCoordinate(coords[i + 1]);\r\n              const t = ((pixel[0] - c1[0]) * (c2[0] - c1[0]) + (pixel[1] - c1[1]) * (c2[1] - c1[1])) /\r\n                ((c2[0] - c1[0]) ** 2 + (c2[1] - c1[1]) ** 2);\r\n              if (t >= 0 && t <= 1) {\r\n                const proj = [c1[0] + t * (c2[0] - c1[0]), c1[1] + t * (c2[1] - c1[1])];\r\n                if (Math.hypot(pixel[0] - proj[0], pixel[1] - proj[1]) < 8) {\r\n                  setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'segment', feature, index: i });\r\n                  found = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (found) break;\r\n        }\r\n      }\r\n\r\n      if (!found) setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: null, feature: null, index: null });\r\n    }\r\n\r\n    document.addEventListener('contextmenu', handleCustomContextMenu);\r\n    return () => document.removeEventListener('contextmenu', handleCustomContextMenu);\r\n  }, [mapRef, vectorSourceRef, setContextMenu]);\r\n\r\n  useEffect(() => {\r\n    function hideMenu() {\r\n      setContextMenu(menu => menu.visible ? { ...menu, visible: false } : menu);\r\n    }\r\n    window.addEventListener('click', hideMenu);\r\n    return () => window.removeEventListener('click', hideMenu);\r\n  }, [setContextMenu]);\r\n\r\n  // Helper to deep clone coordinates\r\n  const cloneCoords = coords => coords.map(c => Array.isArray(c) ? [...c] : c);\r\n\r\n  const handleMenuAction = (action) => {\r\n    if (!contextMenu.feature) return;\r\n    const geom = contextMenu.feature.getGeometry();\r\n    let coords;\r\n    if (geom.getType() === 'Polygon') {\r\n      const arr = geom.getCoordinates()[0];\r\n      if (!Array.isArray(arr) || arr.length < 3 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else if (geom.getType() === 'LineString') {\r\n      const arr = geom.getCoordinates();\r\n      if (!Array.isArray(arr) || arr.length < 2 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if (action === 'delete-vertex' && coords.length > 3) {\r\n      const prevCoords = cloneCoords(coords);\r\n      const newCoords = cloneCoords(coords);\r\n      newCoords.splice(contextMenu.index, 1);\r\n      newCoords[newCoords.length - 1] = newCoords[0];\r\n      geom.setCoordinates([newCoords]);\r\n      if (mapRef.current && mapRef.current.createSegmentOverlays) {\r\n        mapRef.current.createSegmentOverlays(contextMenu.feature, mapRef);\r\n      }\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n\r\n      addHistoryAction({\r\n        type: 'delete-vertex',\r\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\r\n        prevCoords,\r\n        newCoords,\r\n        index: contextMenu.index\r\n      });\r\n\r\n    }\r\n\r\n    if (action === 'delete-segment' && coords.length > 3) {\r\n      if (clearOverlaysProp) clearOverlaysProp(contextMenu.feature);\r\n      const prevCoords = cloneCoords(coords);\r\n      if (\r\n        coords.length > 2 &&\r\n        coords[0][0] === coords[coords.length - 1][0] &&\r\n        coords[0][1] === coords[coords.length - 1][1]\r\n      ) {\r\n        coords = coords.slice(0, coords.length - 1);\r\n      }\r\n      const index = contextMenu.index;\r\n      const part1 = coords.slice(index + 1);\r\n      const part2 = coords.slice(0, index + 1);\r\n      const newCoords = [...part1, ...part2];\r\n\r\n      if (vectorSourceRef.current && vectorSourceRef.current.getFeatures().includes(contextMenu.feature)) {\r\n        vectorSourceRef.current.removeFeature(contextMenu.feature);\r\n      }\r\n      const lineFeature = new Feature(new LineString(newCoords));\r\n      if (contextMenu.feature.getId) {\r\n        lineFeature.setId(contextMenu.feature.getId());\r\n      }\r\n      vectorSourceRef.current.addFeature(lineFeature);\r\n\r\n      if (mapRef.current && mapRef.current.createSegmentOverlays) {\r\n        mapRef.current.createSegmentOverlays(lineFeature, mapRef);\r\n      }\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n\r\n      addHistoryAction({\r\n        type: 'delete-segment',\r\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\r\n        prevCoords,\r\n        newCoords: cloneCoords(newCoords),\r\n        index: contextMenu.index\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n  return contextMenu.visible ? (\r\n    <div className=\"right-click-menu\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: contextMenu.y,\r\n        left: contextMenu.x,\r\n        background: '#fff',\r\n        border: '1px solid #ccc',\r\n        zIndex: 1000,\r\n        padding: 4,\r\n        minWidth: 120\r\n      }}\r\n      onContextMenu={e => e.preventDefault()}\r\n      onMouseLeave={() => setContextMenu({ ...contextMenu, visible: false })}\r\n    >\r\n      {contextMenu.type === 'vertex' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-vertex')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Vertex\r\n        </div>\r\n      )}\r\n      {contextMenu.type === 'segment' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-segment')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Segment\r\n        </div>\r\n      )}\r\n      {!contextMenu.type && <div style={{ color: '#888', padding: '4px 8px' }}>No actions</div>}\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default RightClick;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}