{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-helpers\\\\Edit.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport '../style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction segmentLengthFeet(a, b) {\n  const dx = a[0] - b[0];\n  const dy = a[1] - b[1];\n  const meters = Math.sqrt(dx * dx + dy * dy);\n  return meters * 3.28084;\n}\nconst Edit = ({\n  feature,\n  onSegmentHover,\n  onSegmentUnhover,\n  onSegmentLengthChange\n}) => {\n  _s();\n  // Extract geometry to a variable for useMemo dependency\n  const geometry = feature ? feature.getGeometry() : null;\n\n  // Memoize coords so it only changes when geometry changes\n  const coords = useMemo(() => {\n    if (!geometry) return [];\n    const arr = geometry.getCoordinates();\n    return Array.isArray(arr) && arr.length > 0 ? arr[0] : [];\n  }, [geometry]);\n  const N = coords.length > 0 ? coords.length - 1 : 0;\n  const [inputs, setInputs] = useState(Array.from({\n    length: N\n  }, (_, i) => coords[i] && coords[i + 1] ? segmentLengthFeet(coords[i], coords[i + 1]).toFixed(2) : ''));\n  useEffect(() => {\n    setInputs(Array.from({\n      length: N\n    }, (_, i) => coords[i] && coords[i + 1] ? segmentLengthFeet(coords[i], coords[i + 1]).toFixed(2) : ''));\n  }, [N, coords]);\n  if (!feature) return null;\n  const handleInputChange = (i, val) => {\n    if (/^\\d*\\.?\\d*$/.test(val)) {\n      setInputs(inputs => inputs.map((v, idx) => idx === i ? val : v));\n    }\n  };\n  const handleInputKeyDown = (i, e) => {\n    if (e.key === 'Enter') {\n      const newLength = parseFloat(inputs[i]);\n      if (isNaN(newLength) || newLength <= 0) return;\n      onSegmentLengthChange(i, newLength, () => {\n        e.target.blur();\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 85,\n      right: 20,\n      width: 260,\n      height: 'calc(100vh - 150px)',\n      display: 'flex',\n      flexDirection: 'column',\n      background: 'rgba(255,255,255,0.97)',\n      borderLeft: '1px solid #ccc',\n      boxShadow: '-2px 0 8px rgba(0,0,0,0.07)',\n      zIndex: 2000,\n      fontSize: 13,\n      padding: 12,\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"Edit Segments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      style: {\n        paddingLeft: 20,\n        overflowY: 'auto',\n        flex: 1,\n        minHeight: 0\n      },\n      children: Array.from({\n        length: N\n      }).map((_, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"edit-segment-item\",\n        style: {\n          marginBottom: 10,\n          borderRadius: 4,\n          transition: 'background 0.2s'\n        },\n        onMouseEnter: () => onSegmentHover(i),\n        onMouseLeave: onSegmentUnhover,\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Segment \", i + 1, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputs[i],\n          style: {\n            width: 70,\n            marginLeft: 8,\n            marginRight: 4,\n            fontSize: 13,\n            border: '1px solid #ccc',\n            borderRadius: 3,\n            padding: '2px 4px'\n          },\n          onChange: e => handleInputChange(i, e.target.value),\n          onKeyDown: e => handleInputKeyDown(i, e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), \"ft\"]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Edit, \"NlkAz5gd4+Y/GzcjTKEebomcA3E=\");\n_c = Edit;\nexport default Edit;\nvar _c;\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","jsxDEV","_jsxDEV","segmentLengthFeet","a","b","dx","dy","meters","Math","sqrt","Edit","feature","onSegmentHover","onSegmentUnhover","onSegmentLengthChange","_s","geometry","getGeometry","coords","arr","getCoordinates","Array","isArray","length","N","inputs","setInputs","from","_","i","toFixed","handleInputChange","val","test","map","v","idx","handleInputKeyDown","e","key","newLength","parseFloat","isNaN","target","blur","style","position","top","right","width","height","display","flexDirection","background","borderLeft","boxShadow","zIndex","fontSize","padding","overflow","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","paddingLeft","overflowY","flex","minHeight","className","marginBottom","borderRadius","transition","onMouseEnter","onMouseLeave","type","value","marginLeft","marginRight","border","onChange","onKeyDown","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-helpers/Edit.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport '../style.css';\r\n\r\nfunction segmentLengthFeet(a, b) {\r\n  const dx = a[0] - b[0];\r\n  const dy = a[1] - b[1];\r\n  const meters = Math.sqrt(dx * dx + dy * dy);\r\n  return meters * 3.28084;\r\n}\r\n\r\nconst Edit = ({ feature, onSegmentHover, onSegmentUnhover, onSegmentLengthChange }) => {\r\n  // Extract geometry to a variable for useMemo dependency\r\n  const geometry = feature ? feature.getGeometry() : null;\r\n\r\n  // Memoize coords so it only changes when geometry changes\r\n  const coords = useMemo(() => {\r\n    if (!geometry) return [];\r\n    const arr = geometry.getCoordinates();\r\n    return Array.isArray(arr) && arr.length > 0 ? arr[0] : [];\r\n  }, [geometry]);\r\n\r\n  const N = coords.length > 0 ? coords.length - 1 : 0;\r\n\r\n  const [inputs, setInputs] = useState(\r\n    Array.from({ length: N }, (_, i) =>\r\n      coords[i] && coords[i + 1]\r\n        ? segmentLengthFeet(coords[i], coords[i + 1]).toFixed(2)\r\n        : ''\r\n    )\r\n  );\r\n\r\n  useEffect(() => {\r\n    setInputs(\r\n      Array.from({ length: N }, (_, i) =>\r\n        coords[i] && coords[i + 1]\r\n          ? segmentLengthFeet(coords[i], coords[i + 1]).toFixed(2)\r\n          : ''\r\n      )\r\n    );\r\n  }, [N, coords]);\r\n\r\n  if (!feature) return null;\r\n\r\n  const handleInputChange = (i, val) => {\r\n    if (/^\\d*\\.?\\d*$/.test(val)) {\r\n      setInputs(inputs => inputs.map((v, idx) => idx === i ? val : v));\r\n    }\r\n  };\r\n\r\n  const handleInputKeyDown = (i, e) => {\r\n    if (e.key === 'Enter') {\r\n      const newLength = parseFloat(inputs[i]);\r\n      if (isNaN(newLength) || newLength <= 0) return;\r\n      onSegmentLengthChange(i, newLength, () => {\r\n        e.target.blur();\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'absolute',\r\n        top: 85,\r\n        right: 20,\r\n        width: 260,\r\n        height: 'calc(100vh - 150px)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        background: 'rgba(255,255,255,0.97)',\r\n        borderLeft: '1px solid #ccc',\r\n        boxShadow: '-2px 0 8px rgba(0,0,0,0.07)',\r\n        zIndex: 2000,\r\n        fontSize: 13,\r\n        padding: 12,\r\n        overflow: 'hidden',\r\n      }}\r\n    >\r\n      <h3 style={{ marginTop: 0 }}>Edit Segments</h3>\r\n      <ol style={{ paddingLeft: 20, overflowY: 'auto', flex: 1, minHeight: 0 }}>\r\n        {Array.from({ length: N }).map((_, i) => (\r\n          <li\r\n            key={i}\r\n            className=\"edit-segment-item\"\r\n            style={{\r\n              marginBottom: 10,\r\n              borderRadius: 4,\r\n              transition: 'background 0.2s'\r\n            }}\r\n            onMouseEnter={() => onSegmentHover(i)}\r\n            onMouseLeave={onSegmentUnhover}\r\n          >\r\n            <strong>Segment {i + 1}:</strong>\r\n            <input\r\n              type=\"text\"\r\n              value={inputs[i]}\r\n              style={{\r\n                width: 70,\r\n                marginLeft: 8,\r\n                marginRight: 4,\r\n                fontSize: 13,\r\n                border: '1px solid #ccc',\r\n                borderRadius: 3,\r\n                padding: '2px 4px'\r\n              }}\r\n              onChange={e => handleInputChange(i, e.target.value)}\r\n              onKeyDown={e => handleInputKeyDown(i, e)}\r\n            />\r\n            ft\r\n          </li>\r\n        ))}\r\n      </ol>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Edit;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,SAASC,iBAAiBA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC/B,MAAMC,EAAE,GAAGF,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC;EACtB,MAAME,EAAE,GAAGH,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC;EACtB,MAAMG,MAAM,GAAGC,IAAI,CAACC,IAAI,CAACJ,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAC;EAC3C,OAAOC,MAAM,GAAG,OAAO;AACzB;AAEA,MAAMG,IAAI,GAAGA,CAAC;EAAEC,OAAO;EAAEC,cAAc;EAAEC,gBAAgB;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACrF;EACA,MAAMC,QAAQ,GAAGL,OAAO,GAAGA,OAAO,CAACM,WAAW,CAAC,CAAC,GAAG,IAAI;;EAEvD;EACA,MAAMC,MAAM,GAAGnB,OAAO,CAAC,MAAM;IAC3B,IAAI,CAACiB,QAAQ,EAAE,OAAO,EAAE;IACxB,MAAMG,GAAG,GAAGH,QAAQ,CAACI,cAAc,CAAC,CAAC;IACrC,OAAOC,KAAK,CAACC,OAAO,CAACH,GAAG,CAAC,IAAIA,GAAG,CAACI,MAAM,GAAG,CAAC,GAAGJ,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE;EAC3D,CAAC,EAAE,CAACH,QAAQ,CAAC,CAAC;EAEd,MAAMQ,CAAC,GAAGN,MAAM,CAACK,MAAM,GAAG,CAAC,GAAGL,MAAM,CAACK,MAAM,GAAG,CAAC,GAAG,CAAC;EAEnD,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAG7B,QAAQ,CAClCwB,KAAK,CAACM,IAAI,CAAC;IAAEJ,MAAM,EAAEC;EAAE,CAAC,EAAE,CAACI,CAAC,EAAEC,CAAC,KAC7BX,MAAM,CAACW,CAAC,CAAC,IAAIX,MAAM,CAACW,CAAC,GAAG,CAAC,CAAC,GACtB3B,iBAAiB,CAACgB,MAAM,CAACW,CAAC,CAAC,EAAEX,MAAM,CAACW,CAAC,GAAG,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,GACtD,EACN,CACF,CAAC;EAEDhC,SAAS,CAAC,MAAM;IACd4B,SAAS,CACPL,KAAK,CAACM,IAAI,CAAC;MAAEJ,MAAM,EAAEC;IAAE,CAAC,EAAE,CAACI,CAAC,EAAEC,CAAC,KAC7BX,MAAM,CAACW,CAAC,CAAC,IAAIX,MAAM,CAACW,CAAC,GAAG,CAAC,CAAC,GACtB3B,iBAAiB,CAACgB,MAAM,CAACW,CAAC,CAAC,EAAEX,MAAM,CAACW,CAAC,GAAG,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,GACtD,EACN,CACF,CAAC;EACH,CAAC,EAAE,CAACN,CAAC,EAAEN,MAAM,CAAC,CAAC;EAEf,IAAI,CAACP,OAAO,EAAE,OAAO,IAAI;EAEzB,MAAMoB,iBAAiB,GAAGA,CAACF,CAAC,EAAEG,GAAG,KAAK;IACpC,IAAI,aAAa,CAACC,IAAI,CAACD,GAAG,CAAC,EAAE;MAC3BN,SAAS,CAACD,MAAM,IAAIA,MAAM,CAACS,GAAG,CAAC,CAACC,CAAC,EAAEC,GAAG,KAAKA,GAAG,KAAKP,CAAC,GAAGG,GAAG,GAAGG,CAAC,CAAC,CAAC;IAClE;EACF,CAAC;EAED,MAAME,kBAAkB,GAAGA,CAACR,CAAC,EAAES,CAAC,KAAK;IACnC,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,EAAE;MACrB,MAAMC,SAAS,GAAGC,UAAU,CAAChB,MAAM,CAACI,CAAC,CAAC,CAAC;MACvC,IAAIa,KAAK,CAACF,SAAS,CAAC,IAAIA,SAAS,IAAI,CAAC,EAAE;MACxC1B,qBAAqB,CAACe,CAAC,EAAEW,SAAS,EAAE,MAAM;QACxCF,CAAC,CAACK,MAAM,CAACC,IAAI,CAAC,CAAC;MACjB,CAAC,CAAC;IACJ;EACF,CAAC;EAED,oBACE3C,OAAA;IACE4C,KAAK,EAAE;MACLC,QAAQ,EAAE,UAAU;MACpBC,GAAG,EAAE,EAAE;MACPC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,GAAG;MACVC,MAAM,EAAE,qBAAqB;MAC7BC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,UAAU,EAAE,wBAAwB;MACpCC,UAAU,EAAE,gBAAgB;MAC5BC,SAAS,EAAE,6BAA6B;MACxCC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACZ,CAAE;IAAAC,QAAA,gBAEF3D,OAAA;MAAI4C,KAAK,EAAE;QAAEgB,SAAS,EAAE;MAAE,CAAE;MAAAD,QAAA,EAAC;IAAa;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC/ChE,OAAA;MAAI4C,KAAK,EAAE;QAAEqB,WAAW,EAAE,EAAE;QAAEC,SAAS,EAAE,MAAM;QAAEC,IAAI,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAE,CAAE;MAAAT,QAAA,EACtEvC,KAAK,CAACM,IAAI,CAAC;QAAEJ,MAAM,EAAEC;MAAE,CAAC,CAAC,CAACU,GAAG,CAAC,CAACN,CAAC,EAAEC,CAAC,kBAClC5B,OAAA;QAEEqE,SAAS,EAAC,mBAAmB;QAC7BzB,KAAK,EAAE;UACL0B,YAAY,EAAE,EAAE;UAChBC,YAAY,EAAE,CAAC;UACfC,UAAU,EAAE;QACd,CAAE;QACFC,YAAY,EAAEA,CAAA,KAAM9D,cAAc,CAACiB,CAAC,CAAE;QACtC8C,YAAY,EAAE9D,gBAAiB;QAAA+C,QAAA,gBAE/B3D,OAAA;UAAA2D,QAAA,GAAQ,UAAQ,EAAC/B,CAAC,GAAG,CAAC,EAAC,GAAC;QAAA;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjChE,OAAA;UACE2E,IAAI,EAAC,MAAM;UACXC,KAAK,EAAEpD,MAAM,CAACI,CAAC,CAAE;UACjBgB,KAAK,EAAE;YACLI,KAAK,EAAE,EAAE;YACT6B,UAAU,EAAE,CAAC;YACbC,WAAW,EAAE,CAAC;YACdtB,QAAQ,EAAE,EAAE;YACZuB,MAAM,EAAE,gBAAgB;YACxBR,YAAY,EAAE,CAAC;YACfd,OAAO,EAAE;UACX,CAAE;UACFuB,QAAQ,EAAE3C,CAAC,IAAIP,iBAAiB,CAACF,CAAC,EAAES,CAAC,CAACK,MAAM,CAACkC,KAAK,CAAE;UACpDK,SAAS,EAAE5C,CAAC,IAAID,kBAAkB,CAACR,CAAC,EAAES,CAAC;QAAE;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,MAEJ;MAAA,GA3BOpC,CAAC;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OA2BJ,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEV,CAAC;AAAClD,EAAA,CAxGIL,IAAI;AAAAyE,EAAA,GAAJzE,IAAI;AA0GV,eAAeA,IAAI;AAAC,IAAAyE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}