{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-actions\\\\RightClick.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Feature } from 'ol';\nimport LineString from 'ol/geom/LineString';\nimport { clearPolygonOverlays, remarkLineSegments } from '../map-helpers/Measurements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RightClick = ({\n  mapRef,\n  vectorSourceRef,\n  contextMenu,\n  setContextMenu,\n  clearPolygonOverlays: clearOverlaysProp\n}) => {\n  _s();\n  useEffect(() => {\n    function handleCustomContextMenu(e) {\n      const mapDiv = document.getElementById('map');\n      if (!mapDiv || !mapRef.current || !vectorSourceRef.current) return;\n      if (!mapDiv.contains(e.target)) return;\n      e.preventDefault();\n      const pixel = mapRef.current.getEventPixel(e);\n      const features = vectorSourceRef.current.getFeatures();\n      let found = false;\n      for (const feature of features) {\n        const geom = feature.getGeometry();\n        if (geom.getType() === 'Polygon') {\n          const coords = geom.getCoordinates()[0];\n          for (let i = 0; i < coords.length - 1; i++) {\n            const coordPixel = mapRef.current.getPixelFromCoordinate(coords[i]);\n            if (Math.hypot(pixel[0] - coordPixel[0], pixel[1] - coordPixel[1]) < 8) {\n              setContextMenu({\n                visible: true,\n                x: e.clientX,\n                y: e.clientY,\n                type: 'vertex',\n                feature,\n                index: i\n              });\n              found = true;\n              break;\n            }\n          }\n        }\n        if (found) break;\n      }\n      if (!found) {\n        for (const feature of features) {\n          const geom = feature.getGeometry();\n          if (geom.getType() === 'Polygon') {\n            const coords = geom.getCoordinates()[0];\n            for (let i = 0; i < coords.length - 1; i++) {\n              const c1 = mapRef.current.getPixelFromCoordinate(coords[i]);\n              const c2 = mapRef.current.getPixelFromCoordinate(coords[i + 1]);\n              const t = ((pixel[0] - c1[0]) * (c2[0] - c1[0]) + (pixel[1] - c1[1]) * (c2[1] - c1[1])) / ((c2[0] - c1[0]) ** 2 + (c2[1] - c1[1]) ** 2);\n              if (t >= 0 && t <= 1) {\n                const proj = [c1[0] + t * (c2[0] - c1[0]), c1[1] + t * (c2[1] - c1[1])];\n                if (Math.hypot(pixel[0] - proj[0], pixel[1] - proj[1]) < 8) {\n                  setContextMenu({\n                    visible: true,\n                    x: e.clientX,\n                    y: e.clientY,\n                    type: 'segment',\n                    feature,\n                    index: i\n                  });\n                  found = true;\n                  break;\n                }\n              }\n            }\n          }\n          if (found) break;\n        }\n      }\n      if (!found) setContextMenu({\n        visible: true,\n        x: e.clientX,\n        y: e.clientY,\n        type: null,\n        feature: null,\n        index: null\n      });\n    }\n    document.addEventListener('contextmenu', handleCustomContextMenu);\n    return () => document.removeEventListener('contextmenu', handleCustomContextMenu);\n  }, [mapRef, vectorSourceRef, setContextMenu]);\n  useEffect(() => {\n    function hideMenu() {\n      setContextMenu(menu => menu.visible ? {\n        ...menu,\n        visible: false\n      } : menu);\n    }\n    window.addEventListener('click', hideMenu);\n    return () => window.removeEventListener('click', hideMenu);\n  }, [setContextMenu]);\n  const handleMenuAction = action => {\n    if (!contextMenu.feature) return;\n    const geom = contextMenu.feature.getGeometry();\n    let coords;\n    if (geom.getType() === 'Polygon') {\n      const arr = geom.getCoordinates()[0];\n      if (!Array.isArray(arr) || arr.length < 3 || !Array.isArray(arr[0])) return;\n      coords = arr.map(c => [c[0], c[1]]);\n    } else if (geom.getType() === 'LineString') {\n      const arr = geom.getCoordinates();\n      if (!Array.isArray(arr) || arr.length < 2 || !Array.isArray(arr[0])) return;\n      coords = arr.map(c => [c[0], c[1]]);\n    } else {\n      return;\n    }\n    if (action === 'delete-vertex' && coords.length > 3) {\n      coords.splice(contextMenu.index, 1);\n      coords[coords.length - 1] = coords[0];\n      geom.setCoordinates([coords]);\n      if (mapRef.current && mapRef.current.remarkPolygonSegments) {\n        mapRef.current.remarkPolygonSegments(contextMenu.feature);\n      }\n      setContextMenu({\n        ...contextMenu,\n        visible: false\n      });\n    }\n    if (action === 'delete-segment' && coords.length > 3) {\n      if (coords.length > 2 && coords[0][0] === coords[coords.length - 1][0] && coords[0][1] === coords[coords.length - 1][1]) {\n        coords = coords.slice(0, coords.length - 1);\n      }\n      const index = contextMenu.index;\n      const part1 = coords.slice(index + 1);\n      const part2 = coords.slice(0, index + 1);\n      const newCoords = [...part1, ...part2];\n      if (clearOverlaysProp) clearOverlaysProp(contextMenu.feature);\n      if (vectorSourceRef.current && vectorSourceRef.current.getFeatures().includes(contextMenu.feature)) {\n        vectorSourceRef.current.removeFeature(contextMenu.feature);\n      }\n      const lineFeature = new Feature(new LineString(newCoords));\n      // vectorSourceRef.current.addFeature(lineFeature);\n      // remarkLineSegments(lineFeature, mapRef);\n      setContextMenu({\n        ...contextMenu,\n        visible: false\n      });\n    }\n  };\n  return contextMenu.visible ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"right-click-menu\",\n    style: {\n      position: 'fixed',\n      top: contextMenu.y,\n      left: contextMenu.x,\n      background: '#fff',\n      border: '1px solid #ccc',\n      zIndex: 1000,\n      padding: 4,\n      minWidth: 120\n    },\n    onContextMenu: e => e.preventDefault(),\n    onMouseLeave: () => setContextMenu({\n      ...contextMenu,\n      visible: false\n    }),\n    children: [contextMenu.type === 'vertex' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-item\",\n      onClick: () => handleMenuAction('delete-vertex'),\n      style: {\n        cursor: 'pointer',\n        padding: '4px 8px'\n      },\n      children: \"Delete Vertex\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this), contextMenu.type === 'segment' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-item\",\n      onClick: () => handleMenuAction('delete-segment'),\n      style: {\n        cursor: 'pointer',\n        padding: '4px 8px'\n      },\n      children: \"Delete Segment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this), !contextMenu.type && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#888',\n        padding: '4px 8px'\n      },\n      children: \"No actions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this) : null;\n};\n_s(RightClick, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n_c = RightClick;\nexport default RightClick;\nvar _c;\n$RefreshReg$(_c, \"RightClick\");","map":{"version":3,"names":["React","useEffect","Feature","LineString","clearPolygonOverlays","remarkLineSegments","jsxDEV","_jsxDEV","RightClick","mapRef","vectorSourceRef","contextMenu","setContextMenu","clearOverlaysProp","_s","handleCustomContextMenu","e","mapDiv","document","getElementById","current","contains","target","preventDefault","pixel","getEventPixel","features","getFeatures","found","feature","geom","getGeometry","getType","coords","getCoordinates","i","length","coordPixel","getPixelFromCoordinate","Math","hypot","visible","x","clientX","y","clientY","type","index","c1","c2","t","proj","addEventListener","removeEventListener","hideMenu","menu","window","handleMenuAction","action","arr","Array","isArray","map","c","splice","setCoordinates","remarkPolygonSegments","slice","part1","part2","newCoords","includes","removeFeature","lineFeature","className","style","position","top","left","background","border","zIndex","padding","minWidth","onContextMenu","onMouseLeave","children","onClick","cursor","fileName","_jsxFileName","lineNumber","columnNumber","color","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-actions/RightClick.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Feature } from 'ol';\r\nimport LineString from 'ol/geom/LineString';\r\nimport { clearPolygonOverlays, remarkLineSegments } from '../map-helpers/Measurements';\r\n\r\nconst RightClick = ({\r\n  mapRef,\r\n  vectorSourceRef,\r\n  contextMenu,\r\n  setContextMenu,\r\n  clearPolygonOverlays: clearOverlaysProp\r\n}) => {\r\n  useEffect(() => {\r\n    function handleCustomContextMenu(e) {\r\n      const mapDiv = document.getElementById('map');\r\n      if (!mapDiv || !mapRef.current || !vectorSourceRef.current) return;\r\n      if (!mapDiv.contains(e.target)) return;\r\n      e.preventDefault();\r\n      const pixel = mapRef.current.getEventPixel(e);\r\n      const features = vectorSourceRef.current.getFeatures();\r\n\r\n      let found = false;\r\n      for (const feature of features) {\r\n        const geom = feature.getGeometry();\r\n        if (geom.getType() === 'Polygon') {\r\n          const coords = geom.getCoordinates()[0];\r\n          for (let i = 0; i < coords.length - 1; i++) {\r\n            const coordPixel = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n            if (Math.hypot(pixel[0] - coordPixel[0], pixel[1] - coordPixel[1]) < 8) {\r\n              setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'vertex', feature, index: i });\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (found) break;\r\n      }\r\n\r\n      if (!found) {\r\n        for (const feature of features) {\r\n          const geom = feature.getGeometry();\r\n          if (geom.getType() === 'Polygon') {\r\n            const coords = geom.getCoordinates()[0];\r\n            for (let i = 0; i < coords.length - 1; i++) {\r\n              const c1 = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n              const c2 = mapRef.current.getPixelFromCoordinate(coords[i + 1]);\r\n              const t = ((pixel[0] - c1[0]) * (c2[0] - c1[0]) + (pixel[1] - c1[1]) * (c2[1] - c1[1])) /\r\n                ((c2[0] - c1[0]) ** 2 + (c2[1] - c1[1]) ** 2);\r\n              if (t >= 0 && t <= 1) {\r\n                const proj = [c1[0] + t * (c2[0] - c1[0]), c1[1] + t * (c2[1] - c1[1])];\r\n                if (Math.hypot(pixel[0] - proj[0], pixel[1] - proj[1]) < 8) {\r\n                  setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'segment', feature, index: i });\r\n                  found = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (found) break;\r\n        }\r\n      }\r\n\r\n      if (!found) setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: null, feature: null, index: null });\r\n    }\r\n\r\n    document.addEventListener('contextmenu', handleCustomContextMenu);\r\n    return () => document.removeEventListener('contextmenu', handleCustomContextMenu);\r\n  }, [mapRef, vectorSourceRef, setContextMenu]);\r\n\r\n  useEffect(() => {\r\n    function hideMenu() {\r\n      setContextMenu(menu => menu.visible ? { ...menu, visible: false } : menu);\r\n    }\r\n    window.addEventListener('click', hideMenu);\r\n    return () => window.removeEventListener('click', hideMenu);\r\n  }, [setContextMenu]);\r\n\r\n  const handleMenuAction = (action) => {\r\n    if (!contextMenu.feature) return;\r\n    const geom = contextMenu.feature.getGeometry();\r\n    let coords;\r\n    if (geom.getType() === 'Polygon') {\r\n      const arr = geom.getCoordinates()[0];\r\n      if (!Array.isArray(arr) || arr.length < 3 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else if (geom.getType() === 'LineString') {\r\n      const arr = geom.getCoordinates();\r\n      if (!Array.isArray(arr) || arr.length < 2 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if (action === 'delete-vertex' && coords.length > 3) {\r\n      coords.splice(contextMenu.index, 1);\r\n      coords[coords.length - 1] = coords[0];\r\n      geom.setCoordinates([coords]);\r\n      if (mapRef.current && mapRef.current.remarkPolygonSegments) {\r\n        mapRef.current.remarkPolygonSegments(contextMenu.feature);\r\n      }\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n    }\r\n\r\n    if (action === 'delete-segment' && coords.length > 3) {\r\n      if (\r\n        coords.length > 2 &&\r\n        coords[0][0] === coords[coords.length - 1][0] &&\r\n        coords[0][1] === coords[coords.length - 1][1]\r\n      ) {\r\n        coords = coords.slice(0, coords.length - 1);\r\n      }\r\n      const index = contextMenu.index;\r\n      const part1 = coords.slice(index + 1);\r\n      const part2 = coords.slice(0, index + 1);\r\n      const newCoords = [...part1, ...part2];\r\n\r\n      if (clearOverlaysProp) clearOverlaysProp(contextMenu.feature);\r\n      if (vectorSourceRef.current && vectorSourceRef.current.getFeatures().includes(contextMenu.feature)) {\r\n        vectorSourceRef.current.removeFeature(contextMenu.feature);\r\n      }\r\n      const lineFeature = new Feature(new LineString(newCoords));\r\n      // vectorSourceRef.current.addFeature(lineFeature);\r\n      // remarkLineSegments(lineFeature, mapRef);\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n    }\r\n  };\r\n\r\n  return contextMenu.visible ? (\r\n    <div className=\"right-click-menu\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: contextMenu.y,\r\n        left: contextMenu.x,\r\n        background: '#fff',\r\n        border: '1px solid #ccc',\r\n        zIndex: 1000,\r\n        padding: 4,\r\n        minWidth: 120\r\n      }}\r\n      onContextMenu={e => e.preventDefault()}\r\n      onMouseLeave={() => setContextMenu({ ...contextMenu, visible: false })}\r\n    >\r\n      {contextMenu.type === 'vertex' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-vertex')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Vertex\r\n        </div>\r\n      )}\r\n      {contextMenu.type === 'segment' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-segment')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Segment\r\n        </div>\r\n      )}\r\n      {!contextMenu.type && <div style={{ color: '#888', padding: '4px 8px' }}>No actions</div>}\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default RightClick;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}