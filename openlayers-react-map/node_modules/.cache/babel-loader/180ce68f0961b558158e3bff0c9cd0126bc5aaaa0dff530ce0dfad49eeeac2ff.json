{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-actions\\\\FlipVertical.jsx\";\nimport React from 'react';\nimport Polygon from 'ol/geom/Polygon';\nimport LineString from 'ol/geom/LineString';\nimport { FlipVerticalIcon } from '../svg';\n\n// Helper to clear overlays for a specific feature\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction clearPolygonOverlays(feature, mapRef) {\n  if (feature && feature._segmentOverlays) {\n    feature._segmentOverlays.forEach(overlay => {\n      if (mapRef.current) mapRef.current.removeOverlay(overlay);\n    });\n    feature._segmentOverlays = [];\n  }\n}\n\n// Flip vertically and remark segments/lines\nfunction flipFeatureVertically(feature, mapRef) {\n  clearPolygonOverlays(feature, mapRef);\n  const geom = feature.getGeometry();\n  let coords, ys, axis, flipped;\n  if (geom instanceof Polygon) {\n    coords = geom.getCoordinates()[0];\n    ys = coords.map(c => c[1]);\n    axis = (Math.min(...ys) + Math.max(...ys)) / 2;\n    flipped = coords.map(([x, y]) => [x, axis - (y - axis)]);\n    // Ensure closed ring for polygons\n    if (flipped.length > 1 && (flipped[0][0] !== flipped[flipped.length - 1][0] || flipped[0][1] !== flipped[flipped.length - 1][1])) {\n      flipped[flipped.length - 1] = [...flipped[0]];\n    }\n    geom.setCoordinates([flipped]);\n    // Remark polygon segments\n    if (mapRef.current && mapRef.current.createSegmentOverlays) {\n      mapRef.current.createSegmentOverlays(feature, mapRef);\n    }\n    return {\n      prevCoords: coords,\n      newCoords: flipped\n    };\n  } else if (geom instanceof LineString) {\n    coords = geom.getCoordinates();\n    ys = coords.map(c => c[1]);\n    axis = (Math.min(...ys) + Math.max(...ys)) / 2;\n    flipped = coords.map(([x, y]) => [x, axis - (y - axis)]);\n    geom.setCoordinates(flipped);\n    // Remark line segments\n    if (mapRef.current && mapRef.current.createSegmentOverlays) {\n      mapRef.current.createSegmentOverlays(feature, mapRef);\n    }\n    return {\n      prevCoords: coords,\n      newCoords: flipped\n    };\n  }\n  return null;\n}\nexport default function FlipVertButton({\n  selectedFeature,\n  mapRef,\n  addHistoryAction\n}) {\n  function handleFlipVert() {\n    if (selectedFeature) {\n      const geom = selectedFeature.getGeometry();\n      let prevCoords, newCoords;\n      if (geom instanceof Polygon) {\n        prevCoords = geom.getCoordinates()[0].map(c => [...c]);\n      } else if (geom instanceof LineString) {\n        prevCoords = geom.getCoordinates().map(c => [...c]);\n      }\n      const result = flipFeatureVertically(selectedFeature, mapRef);\n      if (result && addHistoryAction) {\n        addHistoryAction({\n          type: 'flip-vertical',\n          featureId: selectedFeature.getId && selectedFeature.getId(),\n          prevCoords: prevCoords,\n          newCoords: result.newCoords\n        });\n      }\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    title: \"Flip Vertical\",\n    className: \"map-button\",\n    onClick: handleFlipVert,\n    disabled: !selectedFeature,\n    children: /*#__PURE__*/_jsxDEV(FlipVerticalIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_c = FlipVertButton;\nvar _c;\n$RefreshReg$(_c, \"FlipVertButton\");","map":{"version":3,"names":["React","Polygon","LineString","FlipVerticalIcon","jsxDEV","_jsxDEV","clearPolygonOverlays","feature","mapRef","_segmentOverlays","forEach","overlay","current","removeOverlay","flipFeatureVertically","geom","getGeometry","coords","ys","axis","flipped","getCoordinates","map","c","Math","min","max","x","y","length","setCoordinates","createSegmentOverlays","prevCoords","newCoords","FlipVertButton","selectedFeature","addHistoryAction","handleFlipVert","result","type","featureId","getId","title","className","onClick","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-actions/FlipVertical.jsx"],"sourcesContent":["import React from 'react';\r\nimport Polygon from 'ol/geom/Polygon';\r\nimport LineString from 'ol/geom/LineString';\r\n\r\nimport { FlipVerticalIcon } from '../svg';\r\n\r\n// Helper to clear overlays for a specific feature\r\nfunction clearPolygonOverlays(feature, mapRef) {\r\n  if (feature && feature._segmentOverlays) {\r\n    feature._segmentOverlays.forEach(overlay => {\r\n      if (mapRef.current) mapRef.current.removeOverlay(overlay);\r\n    });\r\n    feature._segmentOverlays = [];\r\n  }\r\n}\r\n\r\n// Flip vertically and remark segments/lines\r\nfunction flipFeatureVertically(feature, mapRef) {\r\n  clearPolygonOverlays(feature, mapRef);\r\n  const geom = feature.getGeometry();\r\n  let coords, ys, axis, flipped;\r\n\r\n  if (geom instanceof Polygon) {\r\n    coords = geom.getCoordinates()[0];\r\n    ys = coords.map(c => c[1]);\r\n    axis = (Math.min(...ys) + Math.max(...ys)) / 2;\r\n    flipped = coords.map(([x, y]) => [x, axis - (y - axis)]);\r\n    // Ensure closed ring for polygons\r\n    if (\r\n      flipped.length > 1 &&\r\n      (flipped[0][0] !== flipped[flipped.length - 1][0] ||\r\n        flipped[0][1] !== flipped[flipped.length - 1][1])\r\n    ) {\r\n      flipped[flipped.length - 1] = [...flipped[0]];\r\n    }\r\n    geom.setCoordinates([flipped]);\r\n    // Remark polygon segments\r\n    if (mapRef.current && mapRef.current.createSegmentOverlays) {\r\n      mapRef.current.createSegmentOverlays(feature, mapRef);\r\n    }\r\n    return { prevCoords: coords, newCoords: flipped };\r\n  } else if (geom instanceof LineString) {\r\n    coords = geom.getCoordinates();\r\n    ys = coords.map(c => c[1]);\r\n    axis = (Math.min(...ys) + Math.max(...ys)) / 2;\r\n    flipped = coords.map(([x, y]) => [x, axis - (y - axis)]);\r\n    geom.setCoordinates(flipped);\r\n    // Remark line segments\r\n    if (mapRef.current && mapRef.current.createSegmentOverlays) {\r\n      mapRef.current.createSegmentOverlays(feature, mapRef);\r\n    }\r\n    return { prevCoords: coords, newCoords: flipped };\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default function FlipVertButton({ selectedFeature, mapRef, addHistoryAction }) {\r\n  function handleFlipVert() {\r\n    if (selectedFeature) {\r\n      const geom = selectedFeature.getGeometry();\r\n      let prevCoords, newCoords;\r\n      if (geom instanceof Polygon) {\r\n        prevCoords = geom.getCoordinates()[0].map(c => [...c]);\r\n      } else if (geom instanceof LineString) {\r\n        prevCoords = geom.getCoordinates().map(c => [...c]);\r\n      }\r\n      const result = flipFeatureVertically(selectedFeature, mapRef);\r\n      if (result && addHistoryAction) {\r\n        addHistoryAction({\r\n          type: 'flip-vertical',\r\n          featureId: selectedFeature.getId && selectedFeature.getId(),\r\n          prevCoords: prevCoords,\r\n          newCoords: result.newCoords,\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <button\r\n      title=\"Flip Vertical\"\r\n      className=\"map-button\"\r\n      onClick={handleFlipVert}\r\n      disabled={!selectedFeature}\r\n    >\r\n      <FlipVerticalIcon />\r\n    </button>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}