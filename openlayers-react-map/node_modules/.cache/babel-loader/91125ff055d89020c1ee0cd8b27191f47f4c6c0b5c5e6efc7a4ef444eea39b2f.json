{"ast":null,"code":"import _objectSpread from\"C:/Users/ncarl/Desktop/sketch/openlayers-react-map/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{Feature}from'ol';import LineString from'ol/geom/LineString';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RightClick=_ref=>{let{mapRef,vectorSourceRef,contextMenu,setContextMenu,clearPolygonOverlays:clearOverlaysProp,addHistoryAction}=_ref;useEffect(()=>{function handleCustomContextMenu(e){const mapDiv=document.getElementById('map');if(!mapDiv||!mapRef.current||!vectorSourceRef.current)return;if(!mapDiv.contains(e.target))return;e.preventDefault();const pixel=mapRef.current.getEventPixel(e);const features=vectorSourceRef.current.getFeatures();let found=false;for(const feature of features){const geom=feature.getGeometry();if(geom.getType()==='Polygon'){const coords=geom.getCoordinates()[0];for(let i=0;i<coords.length-1;i++){const coordPixel=mapRef.current.getPixelFromCoordinate(coords[i]);if(Math.hypot(pixel[0]-coordPixel[0],pixel[1]-coordPixel[1])<8){setContextMenu({visible:true,x:e.clientX,y:e.clientY,type:'vertex',feature,index:i});found=true;break;}}}if(found)break;}if(!found){for(const feature of features){const geom=feature.getGeometry();if(geom.getType()==='Polygon'){const coords=geom.getCoordinates()[0];for(let i=0;i<coords.length-1;i++){const c1=mapRef.current.getPixelFromCoordinate(coords[i]);const c2=mapRef.current.getPixelFromCoordinate(coords[i+1]);const t=((pixel[0]-c1[0])*(c2[0]-c1[0])+(pixel[1]-c1[1])*(c2[1]-c1[1]))/((c2[0]-c1[0])**2+(c2[1]-c1[1])**2);if(t>=0&&t<=1){const proj=[c1[0]+t*(c2[0]-c1[0]),c1[1]+t*(c2[1]-c1[1])];if(Math.hypot(pixel[0]-proj[0],pixel[1]-proj[1])<8){setContextMenu({visible:true,x:e.clientX,y:e.clientY,type:'segment',feature,index:i});found=true;break;}}}}if(found)break;}}if(!found)setContextMenu({visible:true,x:e.clientX,y:e.clientY,type:null,feature:null,index:null});}document.addEventListener('contextmenu',handleCustomContextMenu);return()=>document.removeEventListener('contextmenu',handleCustomContextMenu);},[mapRef,vectorSourceRef,setContextMenu]);useEffect(()=>{function hideMenu(){setContextMenu(menu=>menu.visible?_objectSpread(_objectSpread({},menu),{},{visible:false}):menu);}window.addEventListener('click',hideMenu);return()=>window.removeEventListener('click',hideMenu);},[setContextMenu]);// Helper to deep clone coordinates\nconst cloneCoords=coords=>coords.map(c=>Array.isArray(c)?[...c]:c);const handleMenuAction=action=>{if(!contextMenu.feature)return;const geom=contextMenu.feature.getGeometry();let coords;if(geom.getType()==='Polygon'){const arr=geom.getCoordinates()[0];if(!Array.isArray(arr)||arr.length<3||!Array.isArray(arr[0]))return;coords=arr.map(c=>[c[0],c[1]]);}else if(geom.getType()==='LineString'){const arr=geom.getCoordinates();if(!Array.isArray(arr)||arr.length<2||!Array.isArray(arr[0]))return;coords=arr.map(c=>[c[0],c[1]]);}else{return;}if(action==='delete-vertex'&&coords.length>3){const prevCoords=cloneCoords(coords);const newCoords=cloneCoords(coords);newCoords.splice(contextMenu.index,1);newCoords[newCoords.length-1]=newCoords[0];geom.setCoordinates([newCoords]);if(mapRef.current&&mapRef.current.remarkPolygonSegments){mapRef.current.remarkPolygonSegments(contextMenu.feature);}setContextMenu(_objectSpread(_objectSpread({},contextMenu),{},{visible:false}));addHistoryAction({type:'delete-vertex',featureId:contextMenu.feature.getId&&contextMenu.feature.getId(),prevCoords,newCoords,index:contextMenu.index});}if(action==='delete-segment'&&coords.length>3){const prevCoords=cloneCoords(coords);if(coords.length>2&&coords[0][0]===coords[coords.length-1][0]&&coords[0][1]===coords[coords.length-1][1]){coords=coords.slice(0,coords.length-1);}const index=contextMenu.index;const part1=coords.slice(index+1);const part2=coords.slice(0,index+1);const newCoords=[...part1,...part2];if(clearOverlaysProp)clearOverlaysProp(contextMenu.feature);if(vectorSourceRef.current&&vectorSourceRef.current.getFeatures().includes(contextMenu.feature)){vectorSourceRef.current.removeFeature(contextMenu.feature);}const lineFeature=new Feature(new LineString(newCoords));if(contextMenu.feature.getId){lineFeature.setId(contextMenu.feature.getId());}vectorSourceRef.current.addFeature(lineFeature);if(mapRef.current&&mapRef.current.remarkPolygonSegments){mapRef.current.remarkLineSegments(lineFeature);}setContextMenu(_objectSpread(_objectSpread({},contextMenu),{},{visible:false}));addHistoryAction({type:'delete-segment',featureId:contextMenu.feature.getId&&contextMenu.feature.getId(),prevCoords,newCoords:cloneCoords(newCoords),index:contextMenu.index});}};return contextMenu.visible?/*#__PURE__*/_jsxs(\"div\",{className:\"right-click-menu\",style:{position:'fixed',top:contextMenu.y,left:contextMenu.x,background:'#fff',border:'1px solid #ccc',zIndex:1000,padding:4,minWidth:120},onContextMenu:e=>e.preventDefault(),onMouseLeave:()=>setContextMenu(_objectSpread(_objectSpread({},contextMenu),{},{visible:false})),children:[contextMenu.type==='vertex'&&/*#__PURE__*/_jsx(\"div\",{className:\"menu-item\",onClick:()=>handleMenuAction('delete-vertex'),style:{cursor:'pointer',padding:'4px 8px'},children:\"Delete Vertex\"}),contextMenu.type==='segment'&&/*#__PURE__*/_jsx(\"div\",{className:\"menu-item\",onClick:()=>handleMenuAction('delete-segment'),style:{cursor:'pointer',padding:'4px 8px'},children:\"Delete Segment\"}),!contextMenu.type&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',padding:'4px 8px'},children:\"No actions\"})]}):null;};export default RightClick;","map":{"version":3,"names":["React","useEffect","Feature","LineString","jsx","_jsx","jsxs","_jsxs","RightClick","_ref","mapRef","vectorSourceRef","contextMenu","setContextMenu","clearPolygonOverlays","clearOverlaysProp","addHistoryAction","handleCustomContextMenu","e","mapDiv","document","getElementById","current","contains","target","preventDefault","pixel","getEventPixel","features","getFeatures","found","feature","geom","getGeometry","getType","coords","getCoordinates","i","length","coordPixel","getPixelFromCoordinate","Math","hypot","visible","x","clientX","y","clientY","type","index","c1","c2","t","proj","addEventListener","removeEventListener","hideMenu","menu","_objectSpread","window","cloneCoords","map","c","Array","isArray","handleMenuAction","action","arr","prevCoords","newCoords","splice","setCoordinates","remarkPolygonSegments","featureId","getId","slice","part1","part2","includes","removeFeature","lineFeature","setId","addFeature","remarkLineSegments","className","style","position","top","left","background","border","zIndex","padding","minWidth","onContextMenu","onMouseLeave","children","onClick","cursor","color"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-actions/RightClick.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Feature } from 'ol';\r\nimport LineString from 'ol/geom/LineString';\r\n\r\nconst RightClick = ({\r\n  mapRef,\r\n  vectorSourceRef,\r\n  contextMenu,\r\n  setContextMenu,\r\n  clearPolygonOverlays: clearOverlaysProp,\r\n  addHistoryAction\r\n}) => {\r\n  useEffect(() => {\r\n    function handleCustomContextMenu(e) {\r\n      const mapDiv = document.getElementById('map');\r\n      if (!mapDiv || !mapRef.current || !vectorSourceRef.current) return;\r\n      if (!mapDiv.contains(e.target)) return;\r\n      e.preventDefault();\r\n      const pixel = mapRef.current.getEventPixel(e);\r\n      const features = vectorSourceRef.current.getFeatures();\r\n\r\n      let found = false;\r\n      for (const feature of features) {\r\n        const geom = feature.getGeometry();\r\n        if (geom.getType() === 'Polygon') {\r\n          const coords = geom.getCoordinates()[0];\r\n          for (let i = 0; i < coords.length - 1; i++) {\r\n            const coordPixel = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n            if (Math.hypot(pixel[0] - coordPixel[0], pixel[1] - coordPixel[1]) < 8) {\r\n              setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'vertex', feature, index: i });\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (found) break;\r\n      }\r\n\r\n      if (!found) {\r\n        for (const feature of features) {\r\n          const geom = feature.getGeometry();\r\n          if (geom.getType() === 'Polygon') {\r\n            const coords = geom.getCoordinates()[0];\r\n            for (let i = 0; i < coords.length - 1; i++) {\r\n              const c1 = mapRef.current.getPixelFromCoordinate(coords[i]);\r\n              const c2 = mapRef.current.getPixelFromCoordinate(coords[i + 1]);\r\n              const t = ((pixel[0] - c1[0]) * (c2[0] - c1[0]) + (pixel[1] - c1[1]) * (c2[1] - c1[1])) /\r\n                ((c2[0] - c1[0]) ** 2 + (c2[1] - c1[1]) ** 2);\r\n              if (t >= 0 && t <= 1) {\r\n                const proj = [c1[0] + t * (c2[0] - c1[0]), c1[1] + t * (c2[1] - c1[1])];\r\n                if (Math.hypot(pixel[0] - proj[0], pixel[1] - proj[1]) < 8) {\r\n                  setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: 'segment', feature, index: i });\r\n                  found = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (found) break;\r\n        }\r\n      }\r\n\r\n      if (!found) setContextMenu({ visible: true, x: e.clientX, y: e.clientY, type: null, feature: null, index: null });\r\n    }\r\n\r\n    document.addEventListener('contextmenu', handleCustomContextMenu);\r\n    return () => document.removeEventListener('contextmenu', handleCustomContextMenu);\r\n  }, [mapRef, vectorSourceRef, setContextMenu]);\r\n\r\n  useEffect(() => {\r\n    function hideMenu() {\r\n      setContextMenu(menu => menu.visible ? { ...menu, visible: false } : menu);\r\n    }\r\n    window.addEventListener('click', hideMenu);\r\n    return () => window.removeEventListener('click', hideMenu);\r\n  }, [setContextMenu]);\r\n\r\n  // Helper to deep clone coordinates\r\n  const cloneCoords = coords => coords.map(c => Array.isArray(c) ? [...c] : c);\r\n\r\n  const handleMenuAction = (action) => {\r\n    if (!contextMenu.feature) return;\r\n    const geom = contextMenu.feature.getGeometry();\r\n    let coords;\r\n    if (geom.getType() === 'Polygon') {\r\n      const arr = geom.getCoordinates()[0];\r\n      if (!Array.isArray(arr) || arr.length < 3 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else if (geom.getType() === 'LineString') {\r\n      const arr = geom.getCoordinates();\r\n      if (!Array.isArray(arr) || arr.length < 2 || !Array.isArray(arr[0])) return;\r\n      coords = arr.map(c => [c[0], c[1]]);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if (action === 'delete-vertex' && coords.length > 3) {\r\n      const prevCoords = cloneCoords(coords);\r\n      const newCoords = cloneCoords(coords);\r\n      newCoords.splice(contextMenu.index, 1);\r\n      newCoords[newCoords.length - 1] = newCoords[0];\r\n      geom.setCoordinates([newCoords]);\r\n      if (mapRef.current && mapRef.current.remarkPolygonSegments) {\r\n        mapRef.current.remarkPolygonSegments(contextMenu.feature);\r\n      }\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n\r\n      addHistoryAction({\r\n        type: 'delete-vertex',\r\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\r\n        prevCoords,\r\n        newCoords,\r\n        index: contextMenu.index\r\n      });\r\n\r\n    }\r\n\r\n    if (action === 'delete-segment' && coords.length > 3) {\r\n      const prevCoords = cloneCoords(coords);\r\n      if (\r\n        coords.length > 2 &&\r\n        coords[0][0] === coords[coords.length - 1][0] &&\r\n        coords[0][1] === coords[coords.length - 1][1]\r\n      ) {\r\n        coords = coords.slice(0, coords.length - 1);\r\n      }\r\n      const index = contextMenu.index;\r\n      const part1 = coords.slice(index + 1);\r\n      const part2 = coords.slice(0, index + 1);\r\n      const newCoords = [...part1, ...part2];\r\n\r\n      if (clearOverlaysProp) clearOverlaysProp(contextMenu.feature);\r\n      if (vectorSourceRef.current && vectorSourceRef.current.getFeatures().includes(contextMenu.feature)) {\r\n        vectorSourceRef.current.removeFeature(contextMenu.feature);\r\n      }\r\n      const lineFeature = new Feature(new LineString(newCoords));\r\n      if (contextMenu.feature.getId) {\r\n        lineFeature.setId(contextMenu.feature.getId());\r\n      }\r\n      vectorSourceRef.current.addFeature(lineFeature);\r\n\r\n      if (mapRef.current && mapRef.current.remarkPolygonSegments) {\r\n        mapRef.current.remarkLineSegments(lineFeature);\r\n      }\r\n      setContextMenu({ ...contextMenu, visible: false });\r\n\r\n      addHistoryAction({\r\n        type: 'delete-segment',\r\n        featureId: contextMenu.feature.getId && contextMenu.feature.getId(),\r\n        prevCoords,\r\n        newCoords: cloneCoords(newCoords),\r\n        index: contextMenu.index\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n  return contextMenu.visible ? (\r\n    <div className=\"right-click-menu\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: contextMenu.y,\r\n        left: contextMenu.x,\r\n        background: '#fff',\r\n        border: '1px solid #ccc',\r\n        zIndex: 1000,\r\n        padding: 4,\r\n        minWidth: 120\r\n      }}\r\n      onContextMenu={e => e.preventDefault()}\r\n      onMouseLeave={() => setContextMenu({ ...contextMenu, visible: false })}\r\n    >\r\n      {contextMenu.type === 'vertex' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-vertex')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Vertex\r\n        </div>\r\n      )}\r\n      {contextMenu.type === 'segment' && (\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => handleMenuAction('delete-segment')}\r\n          style={{ cursor: 'pointer', padding: '4px 8px' }}\r\n        >\r\n          Delete Segment\r\n        </div>\r\n      )}\r\n      {!contextMenu.type && <div style={{ color: '#888', padding: '4px 8px' }}>No actions</div>}\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default RightClick;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}