{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ncarl\\\\Desktop\\\\sketch\\\\openlayers-react-map\\\\src\\\\map-helpers\\\\Edit.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport '../style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction segmentLengthFeet(a, b) {\n  const dx = a[0] - b[0];\n  const dy = a[1] - b[1];\n  const meters = Math.sqrt(dx * dx + dy * dy);\n  return meters * 3.28084;\n}\nconst Edit = ({\n  feature,\n  onSegmentHover,\n  onSegmentUnhover,\n  onSegmentLengthChange\n}) => {\n  _s();\n  if (!feature) return null;\n  const coords = feature.getGeometry().getCoordinates()[0];\n  const N = coords.length - 1;\n\n  // Local state for segment length inputs\n  const [inputs, setInputs] = useState(Array.from({\n    length: N\n  }, (_, i) => segmentLengthFeet(coords[i], coords[(i + 1) % N]).toFixed(2)));\n\n  // Update local input state if feature changes\n  React.useEffect(() => {\n    setInputs(Array.from({\n      length: N\n    }, (_, i) => segmentLengthFeet(coords[i], coords[(i + 1) % N]).toFixed(2)));\n  }, [feature, feature === null || feature === void 0 ? void 0 : feature.getGeometry().getCoordinates()]);\n  const handleInputChange = (i, val) => {\n    // Only allow numbers and decimal\n    if (/^\\d*\\.?\\d*$/.test(val)) {\n      setInputs(inputs => inputs.map((v, idx) => idx === i ? val : v));\n    }\n  };\n  const handleInputKeyDown = (i, e) => {\n    if (e.key === 'Enter') {\n      const newLength = parseFloat(inputs[i]);\n      if (isNaN(newLength) || newLength <= 0) return;\n      onSegmentLengthChange(i, newLength, () => {\n        // On success, blur the input\n        e.target.blur();\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 85,\n      right: 20,\n      width: 260,\n      height: 'calc(100vh - 150px)',\n      display: 'flex',\n      flexDirection: 'column',\n      background: 'rgba(255,255,255,0.97)',\n      borderLeft: '1px solid #ccc',\n      boxShadow: '-2px 0 8px rgba(0,0,0,0.07)',\n      zIndex: 2000,\n      fontSize: 13,\n      padding: 12,\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"Edit Segments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      style: {\n        paddingLeft: 20,\n        overflowY: 'auto',\n        flex: 1,\n        minHeight: 0\n      },\n      children: Array.from({\n        length: N\n      }).map((_, i) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"edit-segment-item\",\n          style: {\n            marginBottom: 10,\n            borderRadius: 4,\n            transition: 'background 0.2s'\n          },\n          onMouseEnter: () => onSegmentHover(i),\n          onMouseLeave: onSegmentUnhover,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"Segment \", i + 1, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: inputs[i],\n            style: {\n              width: 70,\n              marginLeft: 8,\n              marginRight: 4,\n              fontSize: 13,\n              border: '1px solid #ccc',\n              borderRadius: 3,\n              padding: '2px 4px'\n            },\n            onChange: e => handleInputChange(i, e.target.value),\n            onKeyDown: e => handleInputKeyDown(i, e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), \"ft\"]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(Edit, \"3UxlIK9qMOkSUNrquXKPrh7LSv8=\");\n_c = Edit;\nexport default Edit;\nvar _c;\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","segmentLengthFeet","a","b","dx","dy","meters","Math","sqrt","Edit","feature","onSegmentHover","onSegmentUnhover","onSegmentLengthChange","_s","coords","getGeometry","getCoordinates","N","length","inputs","setInputs","Array","from","_","i","toFixed","useEffect","handleInputChange","val","test","map","v","idx","handleInputKeyDown","e","key","newLength","parseFloat","isNaN","target","blur","style","position","top","right","width","height","display","flexDirection","background","borderLeft","boxShadow","zIndex","fontSize","padding","overflow","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","paddingLeft","overflowY","flex","minHeight","className","marginBottom","borderRadius","transition","onMouseEnter","onMouseLeave","type","value","marginLeft","marginRight","border","onChange","onKeyDown","_c","$RefreshReg$"],"sources":["C:/Users/ncarl/Desktop/sketch/openlayers-react-map/src/map-helpers/Edit.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../style.css';\r\n\r\nfunction segmentLengthFeet(a, b) {\r\n  const dx = a[0] - b[0];\r\n  const dy = a[1] - b[1];\r\n  const meters = Math.sqrt(dx * dx + dy * dy);\r\n  return meters * 3.28084;\r\n}\r\n\r\nconst Edit = ({ feature, onSegmentHover, onSegmentUnhover, onSegmentLengthChange }) => {\r\n  if (!feature) return null;\r\n  const coords = feature.getGeometry().getCoordinates()[0];\r\n  const N = coords.length - 1;\r\n\r\n  // Local state for segment length inputs\r\n  const [inputs, setInputs] = useState(\r\n    Array.from({ length: N }, (_, i) => segmentLengthFeet(coords[i], coords[(i + 1) % N]).toFixed(2))\r\n  );\r\n\r\n  // Update local input state if feature changes\r\n  React.useEffect(() => {\r\n    setInputs(Array.from({ length: N }, (_, i) => segmentLengthFeet(coords[i], coords[(i + 1) % N]).toFixed(2)));\r\n  }, [feature, feature?.getGeometry().getCoordinates()]);\r\n\r\n  const handleInputChange = (i, val) => {\r\n    // Only allow numbers and decimal\r\n    if (/^\\d*\\.?\\d*$/.test(val)) {\r\n      setInputs(inputs => inputs.map((v, idx) => idx === i ? val : v));\r\n    }\r\n  };\r\n\r\n  const handleInputKeyDown = (i, e) => {\r\n    if (e.key === 'Enter') {\r\n      const newLength = parseFloat(inputs[i]);\r\n      if (isNaN(newLength) || newLength <= 0) return;\r\n      onSegmentLengthChange(i, newLength, () => {\r\n        // On success, blur the input\r\n        e.target.blur();\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'absolute',\r\n        top: 85,\r\n        right: 20,\r\n        width: 260,\r\n        height: 'calc(100vh - 150px)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        background: 'rgba(255,255,255,0.97)',\r\n        borderLeft: '1px solid #ccc',\r\n        boxShadow: '-2px 0 8px rgba(0,0,0,0.07)',\r\n        zIndex: 2000,\r\n        fontSize: 13,\r\n        padding: 12,\r\n        overflow: 'hidden',\r\n      }}\r\n    >\r\n      <h3 style={{ marginTop: 0 }}>Edit Segments</h3>\r\n      <ol style={{ paddingLeft: 20, overflowY: 'auto', flex: 1, minHeight: 0 }}>\r\n        {Array.from({ length: N }).map((_, i) => {\r\n          return (\r\n            <li\r\n              key={i}\r\n              className=\"edit-segment-item\"\r\n              style={{\r\n                marginBottom: 10,\r\n                borderRadius: 4,\r\n                transition: 'background 0.2s'\r\n              }}\r\n              onMouseEnter={() => onSegmentHover(i)}\r\n              onMouseLeave={onSegmentUnhover}\r\n            >\r\n              <strong>Segment {i + 1}:</strong>\r\n              <input\r\n                type=\"text\"\r\n                value={inputs[i]}\r\n                style={{\r\n                  width: 70,\r\n                  marginLeft: 8,\r\n                  marginRight: 4,\r\n                  fontSize: 13,\r\n                  border: '1px solid #ccc',\r\n                  borderRadius: 3,\r\n                  padding: '2px 4px'\r\n                }}\r\n                onChange={e => handleInputChange(i, e.target.value)}\r\n                onKeyDown={e => handleInputKeyDown(i, e)}\r\n              />\r\n              ft\r\n            </li>\r\n          );\r\n        })}\r\n      </ol>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Edit;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}